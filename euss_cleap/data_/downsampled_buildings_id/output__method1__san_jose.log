2024-11-06 16:11:50,904 - INFO - ---------------------------------------------------------
2024-11-06 16:11:50,904 - INFO - Downsampling buildstock for  san_jose  using method 1
2024-11-06 16:11:50,906 - INFO - ---------------------------------------------------------
2024-11-06 16:11:50,909 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (549999 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (340 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2024-11-06 16:11:50,909 - INFO - 
2024-11-06 16:11:50,910 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2024-11-06 16:11:51,142 - INFO -    Located 12408 positively weighted rows in bst_to_search
2024-11-06 16:11:51,142 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2024-11-06 16:11:51,204 - INFO - 

** Downsampled to: 1672 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure', 'build_existing_model.water_heater_fuel', 'build_existing_model.vintage_acs', 'build_existing_model.geometry_floor_area_bin', 'build_existing_model.hvac_heating_type', 'build_existing_model.federal_poverty_level', 'build_existing_model.vacancy_status']
2024-11-06 16:11:51,205 - INFO - 
 -> Step 3 : Weight Normalization
2024-11-06 16:11:51,209 - INFO - Checking marginals from weight_map of n=1672...
2024-11-06 16:11:51,217 - INFO -  [[ build_existing_model.income ]] 
2024-11-06 16:11:51,228 - INFO - 
                              matched     truth  pct_diff
build_existing_model.income                              
10000-14999                  0.044118  0.044118      -0.0
100000-119999                0.079412  0.079412       0.0
120000-139999                0.061765  0.061765      -0.0
140000-159999                0.038235  0.038235      -0.0
15000-19999                  0.047059  0.047059       0.0
160000-179999                0.041176  0.041176      -0.0
180000-199999                0.020588  0.020588      -0.0
20000-24999                  0.023529  0.023529       0.0
200000+                      0.202941  0.202941      -0.0
25000-29999                  0.032353  0.032353      -0.0
30000-34999                  0.020588  0.020588      -0.0
35000-39999                  0.014706  0.014706       0.0
40000-44999                  0.023529  0.023529       0.0
45000-49999                  0.020588  0.020588       0.0
50000-59999                  0.044118  0.044118      -0.0
60000-69999                  0.047059  0.047059       0.0
70000-79999                  0.050000  0.050000      -0.0
80000-99999                  0.132353  0.132353      -0.0
<10000                       0.026471  0.026471      -0.0
Not Available                0.029412  0.029412       0.0

2024-11-06 16:11:51,234 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2024-11-06 16:11:51,241 - INFO - 
                                                    matched  truth  pct_diff
build_existing_model.ashrae_iecc_climate_zone_2004                          
3C                                                      1.0    1.0       0.0

2024-11-06 16:11:51,247 - INFO -  [[ build_existing_model.state ]] 
2024-11-06 16:11:51,253 - INFO - 
                            matched  truth  pct_diff
build_existing_model.state                          
CA                              1.0    1.0       0.0

2024-11-06 16:11:51,260 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2024-11-06 16:11:51,268 - INFO - 
                                                   matched     truth  pct_diff
build_existing_model.geometry_building_type_recs                              
Mobile Home                                       0.061765  0.061765       0.0
Multi-Family with 2 - 4 Units                     0.067647  0.067647       0.0
Multi-Family with 5+ Units                        0.282353  0.282353       0.0
Single-Family Attached                            0.135294  0.135294       0.0
Single-Family Detached                            0.452941  0.452941       0.0

2024-11-06 16:11:51,276 - INFO -  [[ build_existing_model.heating_fuel ]] 
2024-11-06 16:11:51,282 - INFO - 
                                    matched     truth  pct_diff
build_existing_model.heating_fuel                              
Electricity                        0.400000  0.400000      -0.0
Natural Gas                        0.597059  0.597059       0.0
Other Fuel                         0.002941  0.002941       0.0

2024-11-06 16:11:51,289 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2024-11-06 16:11:51,297 - INFO - 
                                         matched     truth  pct_diff
build_existing_model.hvac_cooling_type                              
Central AC                              0.488235  0.488235       0.0
Ducted Heat Pump                        0.064706  0.064706       0.0
Non-Ducted Heat Pump                    0.011765  0.011765       0.0
None                                    0.247059  0.247059       0.0
Room AC                                 0.188235  0.188235       0.0

2024-11-06 16:11:51,304 - INFO -  [[ build_existing_model.tenure ]] 
2024-11-06 16:11:51,312 - INFO - 
                              matched     truth  pct_diff
build_existing_model.tenure                              
Not Available                0.029412  0.029412       0.0
Owner                        0.511765  0.511765       0.0
Renter                       0.458824  0.458824       0.0

2024-11-06 16:11:51,322 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2024-11-06 16:11:51,328 - INFO - 
                                         matched     truth  pct_diff
build_existing_model.water_heater_fuel                              
Electricity                             0.241176  0.241176       0.0
Natural Gas                             0.741176  0.741176      -0.0
Propane                                 0.017647  0.017647       0.0

2024-11-06 16:11:51,334 - INFO -  [[ build_existing_model.vintage_acs ]] 
2024-11-06 16:11:51,341 - INFO - 
                                   matched     truth  pct_diff
build_existing_model.vintage_acs                              
1940-59                           0.173529  0.173529       0.0
1960-79                           0.411765  0.411765       0.0
1980-99                           0.217647  0.217647      -0.0
2000-09                           0.108824  0.108824      -0.0
2010s                             0.044118  0.044118      -0.0
<1940                             0.044118  0.044118      -0.0

2024-11-06 16:11:51,348 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2024-11-06 16:11:51,357 - INFO - 
                                               matched     truth  pct_diff
build_existing_model.geometry_floor_area_bin                              
0-1499                                        0.588235  0.588235      -0.0
1500-2499                                     0.311765  0.311765      -0.0
2500-3999                                     0.082353  0.082353      -0.0
4000+                                         0.017647  0.017647       0.0

2024-11-06 16:11:51,365 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2024-11-06 16:11:51,376 - INFO - 
                                         matched     truth  pct_diff
build_existing_model.hvac_heating_type                              
Ducted Heat Pump                        0.064706  0.064706      -0.0
Ducted Heating                          0.597059  0.597059       0.0
Non-Ducted Heat Pump                    0.011765  0.011765       0.0
Non-Ducted Heating                      0.326471  0.326471       0.0

2024-11-06 16:11:51,384 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2024-11-06 16:11:51,391 - INFO - 
                                             matched     truth  pct_diff
build_existing_model.federal_poverty_level                              
0-100%                                      0.088235  0.088235      -0.0
100-150%                                    0.064706  0.064706      -0.0
150-200%                                    0.055882  0.055882      -0.0
200-300%                                    0.088235  0.088235      -0.0
300-400%                                    0.094118  0.094118       0.0
400%+                                       0.579412  0.579412      -0.0
Not Available                               0.029412  0.029412       0.0

2024-11-06 16:11:51,399 - INFO -  [[ build_existing_model.vacancy_status ]] 
2024-11-06 16:11:51,405 - INFO - 
                                      matched     truth  pct_diff
build_existing_model.vacancy_status                              
Occupied                             0.970588  0.970588       0.0
Vacant                               0.029412  0.029412       0.0

2024-11-06 16:11:51,406 - INFO - No unmatched HC
2024-11-06 16:11:51,424 - INFO - truth vs. matched - per dwelling unit energy:
2024-11-06 16:11:51,433 - INFO - 
                                    matched      truth  pct_diff
energy_use_total_m_btu            48.550274  47.875109  1.410264
fuel_use_electricity_total_m_btu  23.679141  23.950088 -1.131297
fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
fuel_use_natural_gas_total_m_btu  24.540514  23.613326  3.926545
fuel_use_propane_total_m_btu       0.263428   0.244465  7.757114

2024-11-06 16:11:51,455 - INFO - truth vs. matched - per dwelling unit energy:
2024-11-06 16:11:51,463 - INFO - 
                                                                        matched      truth  pct_diff
build_existing_model.vacancy_status                                                                 
Occupied                            energy_use_total_m_btu            49.727920  49.029076  1.425367
                                    fuel_use_electricity_total_m_btu  24.216810  24.490009 -1.115555
                                    fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                    fuel_use_natural_gas_total_m_btu  25.170468  24.217924  3.933220
                                    fuel_use_propane_total_m_btu       0.271411   0.251873  7.757114
Vacant                              energy_use_total_m_btu             9.687958   9.794200 -1.084744
                                    fuel_use_electricity_total_m_btu   5.936093   6.132700 -3.205872
                                    fuel_use_fuel_oil_total_m_btu      0.000000   0.000000       NaN
                                    fuel_use_natural_gas_total_m_btu   3.752028   3.661600  2.469644
                                    fuel_use_propane_total_m_btu       0.000000   0.000000       NaN

2024-11-06 16:11:51,493 - INFO - truth vs. matched - per dwelling unit energy:
2024-11-06 16:11:51,506 - INFO - 
                                                                matched      truth   pct_diff
build_existing_model.tenure                                                                  
Not Available               energy_use_total_m_btu             9.687958   9.794200  -1.084744
                            fuel_use_electricity_total_m_btu   5.936093   6.132700  -3.205872
                            fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                            fuel_use_natural_gas_total_m_btu   3.752028   3.661600   2.469644
                            fuel_use_propane_total_m_btu       0.000000   0.000000        NaN
Owner                       energy_use_total_m_btu            62.153322  61.091678   1.737789
                            fuel_use_electricity_total_m_btu  27.860915  28.339310  -1.688097
                            fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                            fuel_use_natural_gas_total_m_btu  33.961849  32.424103   4.742601
                            fuel_use_propane_total_m_btu       0.199283   0.196954   1.182521
Renter                      energy_use_total_m_btu            35.868818  35.574635   0.826946
                            fuel_use_electricity_total_m_btu  20.152230  20.196558  -0.219481
                            fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                            fuel_use_natural_gas_total_m_btu  15.364697  15.064878   1.990185
                            fuel_use_propane_total_m_btu       0.351861   0.313128  12.369612

2024-11-06 16:11:51,537 - INFO - truth vs. matched - per dwelling unit energy:
2024-11-06 16:11:51,550 - INFO - 
                                                                               matched      truth   pct_diff
build_existing_model.federal_poverty_level                                                                  
0-100%                                     energy_use_total_m_btu            33.487983  33.451200   0.109961
                                           fuel_use_electricity_total_m_btu  20.287737  20.846500  -2.680366
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  12.954732  12.379767   4.644397
                                           fuel_use_propane_total_m_btu       0.245579   0.224967   9.162300
100-150%                                   energy_use_total_m_btu            27.984797  26.854727   4.208085
                                           fuel_use_electricity_total_m_btu  18.622737  17.819864   4.505497
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu   9.187276   8.860091   3.692796
                                           fuel_use_propane_total_m_btu       0.174636   0.174636   0.000000
150-200%                                   energy_use_total_m_btu            61.775816  63.142737  -2.164811
                                           fuel_use_electricity_total_m_btu  30.571303  31.507842  -2.972401
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  31.017382  31.510158  -1.563865
                                           fuel_use_propane_total_m_btu       0.187184   0.124789  50.000000
200-300%                                   energy_use_total_m_btu            48.110082  48.370167  -0.537697
                                           fuel_use_electricity_total_m_btu  21.843878  22.574000  -3.234350
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  25.996840  25.596400   1.564439
                                           fuel_use_propane_total_m_btu       0.269383   0.199833  34.804003
300-400%                                   energy_use_total_m_btu            47.341184  49.215156  -3.807714
                                           fuel_use_electricity_total_m_btu  22.230534  23.216156  -4.245413
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  24.849667  25.737938  -3.451210
                                           fuel_use_propane_total_m_btu       0.260875   0.260875   0.000000
400%+                                      energy_use_total_m_btu            54.101258  52.586563   2.880383
                                           fuel_use_electricity_total_m_btu  25.510998  25.611599  -0.392794
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu  28.178009  26.575640   6.029466
                                           fuel_use_propane_total_m_btu       0.296295   0.283315   4.581718
Not Available                              energy_use_total_m_btu             9.687958   9.794200  -1.084744
                                           fuel_use_electricity_total_m_btu   5.936093   6.132700  -3.205872
                                           fuel_use_fuel_oil_total_m_btu      0.000000   0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu   3.752028   3.661600   2.469644
                                           fuel_use_propane_total_m_btu       0.000000   0.000000        NaN

2024-11-06 16:11:51,562 - INFO - >> Database down-selected to 1672 buildings, based on input data of 340 buildings, result outputs to: 
C:\Users\ylou2\Desktop\resstock\euss_cleap\data_\downsampled_buildings_id\results_up00__downsampled_method1__san_jose.csv

