2024-11-06 16:11:55,400 - INFO - ---------------------------------------------------------
2024-11-06 16:11:55,401 - INFO - Downsampling buildstock for  jackson_county  using method 1
2024-11-06 16:11:55,403 - INFO - ---------------------------------------------------------
2024-11-06 16:11:55,407 - INFO - Creating n>=1000 buildlstock by downsampling from: bst_to_search (549999 samples) 
while matching the marginal distribution of 13 key HCs from: bst_to_match (118 samples), 
['Income', 'ASHRAE IECC Climate Zone 2004', 'State', 'Geometry Building Type RECS', 'Heating Fuel', 'HVAC Cooling Type', 'Tenure', 'Water Heater Fuel', 'Vintage ACS', 'Geometry Floor Area Bin', 'HVAC Heating Type', 'Federal Poverty Level', 'Vacancy Status']
2024-11-06 16:11:55,408 - INFO - 
2024-11-06 16:11:55,409 - INFO - 
---- Attempt 1: downsample using 13 key HCs: ----
2024-11-06 16:11:55,656 - INFO -    Located 2487 positively weighted rows in bst_to_search
2024-11-06 16:11:55,656 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2024-11-06 16:11:55,713 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 199 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vacancy_status...
2024-11-06 16:11:55,713 - INFO - 
---- Attempt 2: downsample using 12 key HCs: ----
2024-11-06 16:11:55,724 - INFO -    Located 2487 positively weighted rows in bst_to_search
2024-11-06 16:11:55,725 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2024-11-06 16:11:55,758 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 199 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.federal_poverty_level...
2024-11-06 16:11:55,758 - INFO - 
---- Attempt 3: downsample using 11 key HCs: ----
2024-11-06 16:11:55,769 - INFO -    Located 2487 positively weighted rows in bst_to_search
2024-11-06 16:11:55,771 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2024-11-06 16:11:55,804 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 235 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.hvac_heating_type...
2024-11-06 16:11:55,805 - INFO - 
---- Attempt 4: downsample using 10 key HCs: ----
2024-11-06 16:11:55,816 - INFO -    Located 2487 positively weighted rows in bst_to_search
2024-11-06 16:11:55,818 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2024-11-06 16:11:55,845 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 252 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.geometry_floor_area_bin...
2024-11-06 16:11:55,845 - INFO - 
---- Attempt 5: downsample using 9 key HCs: ----
2024-11-06 16:11:55,860 - INFO -    Located 2487 positively weighted rows in bst_to_search
2024-11-06 16:11:55,861 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2024-11-06 16:11:55,890 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 350 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.vintage_acs...
2024-11-06 16:11:55,890 - INFO - 
---- Attempt 6: downsample using 8 key HCs: ----
2024-11-06 16:11:55,900 - INFO -    Located 2487 positively weighted rows in bst_to_search
2024-11-06 16:11:55,900 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2024-11-06 16:11:55,926 - INFO -    Downsampling FAILED with insufficient rows: Recalculation leads to 847 positively weighted samples 
retry by relaxing HC_to_search by removing: build_existing_model.water_heater_fuel...
2024-11-06 16:11:55,926 - INFO - 
---- Attempt 7: downsample using 7 key HCs: ----
2024-11-06 16:11:55,933 - INFO -    Located 2487 positively weighted rows in bst_to_search
2024-11-06 16:11:55,933 - INFO - 
 -> Step 2 : Weight Recalculation
Method 1A - normalizing to exact joint-prob from bst_to_match ...
2024-11-06 16:11:55,957 - INFO - 

** Downsampled to: 1016 samples, by matching to: ['build_existing_model.income', 'build_existing_model.ashrae_iecc_climate_zone_2004', 'build_existing_model.state', 'build_existing_model.geometry_building_type_recs', 'build_existing_model.heating_fuel', 'build_existing_model.hvac_cooling_type', 'build_existing_model.tenure']
2024-11-06 16:11:55,958 - INFO - 
 -> Step 3 : Weight Normalization
2024-11-06 16:11:55,960 - INFO - Checking marginals from weight_map of n=1016...
2024-11-06 16:11:55,968 - INFO -  [[ build_existing_model.income ]] 
2024-11-06 16:11:55,977 - INFO - 
                              matched     truth  pct_diff
build_existing_model.income                              
10000-14999                  0.084746  0.084746       0.0
100000-119999                0.050847  0.050847      -0.0
120000-139999                0.033898  0.033898       0.0
140000-159999                0.033898  0.033898       0.0
15000-19999                  0.050847  0.050847       0.0
160000-179999                0.008475  0.008475       0.0
180000-199999                0.008475  0.008475       0.0
20000-24999                  0.067797  0.067797       0.0
200000+                      0.016949  0.016949       0.0
25000-29999                  0.025424  0.025424       0.0
30000-34999                  0.016949  0.016949       0.0
35000-39999                  0.033898  0.033898      -0.0
40000-44999                  0.016949  0.016949       0.0
45000-49999                  0.042373  0.042373       0.0
50000-59999                  0.093220  0.093220       0.0
60000-69999                  0.025424  0.025424       0.0
70000-79999                  0.076271  0.076271       0.0
80000-99999                  0.050847  0.050847      -0.0
<10000                       0.127119  0.127119       0.0
Not Available                0.135593  0.135593       0.0

2024-11-06 16:11:55,985 - INFO -  [[ build_existing_model.ashrae_iecc_climate_zone_2004 ]] 
2024-11-06 16:11:55,991 - INFO - 
                                                    matched  truth  pct_diff
build_existing_model.ashrae_iecc_climate_zone_2004                          
4A                                                      1.0    1.0       0.0

2024-11-06 16:11:55,998 - INFO -  [[ build_existing_model.state ]] 
2024-11-06 16:11:56,004 - INFO - 
                            matched  truth  pct_diff
build_existing_model.state                          
IL                              1.0    1.0       0.0

2024-11-06 16:11:56,011 - INFO -  [[ build_existing_model.geometry_building_type_recs ]] 
2024-11-06 16:11:56,019 - INFO - 
                                                   matched     truth  pct_diff
build_existing_model.geometry_building_type_recs                              
Mobile Home                                       0.118644  0.118644       0.0
Multi-Family with 2 - 4 Units                     0.135593  0.135593       0.0
Multi-Family with 5+ Units                        0.110169  0.110169       0.0
Single-Family Attached                            0.008475  0.008475       0.0
Single-Family Detached                            0.627119  0.627119       0.0

2024-11-06 16:11:56,026 - INFO -  [[ build_existing_model.heating_fuel ]] 
2024-11-06 16:11:56,033 - INFO - 
                                    matched     truth  pct_diff
build_existing_model.heating_fuel                              
Electricity                        0.584746  0.584746       0.0
Natural Gas                        0.322034  0.322034       0.0
Other Fuel                         0.025424  0.025424       0.0
Propane                            0.067797  0.067797       0.0

2024-11-06 16:11:56,042 - INFO -  [[ build_existing_model.hvac_cooling_type ]] 
2024-11-06 16:11:56,049 - INFO - 
                                         matched     truth  pct_diff
build_existing_model.hvac_cooling_type                              
Central AC                              0.601695  0.601695       0.0
Ducted Heat Pump                        0.118644  0.118644       0.0
Non-Ducted Heat Pump                    0.016949  0.016949       0.0
None                                    0.025424  0.025424       0.0
Room AC                                 0.237288  0.237288       0.0

2024-11-06 16:11:56,056 - INFO -  [[ build_existing_model.tenure ]] 
2024-11-06 16:11:56,062 - INFO - 
                              matched     truth  pct_diff
build_existing_model.tenure                              
Not Available                0.135593  0.135593       0.0
Owner                        0.525424  0.525424      -0.0
Renter                       0.338983  0.338983       0.0

2024-11-06 16:11:56,063 - INFO - For unmatched HC:
2024-11-06 16:11:56,064 - INFO - Checking marginals from weight_map of n=1016...
2024-11-06 16:11:56,071 - INFO -  [[ build_existing_model.water_heater_fuel ]] 
2024-11-06 16:11:56,077 - INFO - 
                                         matched     truth   pct_diff
build_existing_model.water_heater_fuel                               
Electricity                             0.602378  0.627119  -3.945161
Natural Gas                             0.346826  0.338983   2.313674
Propane                                 0.050796  0.033898  49.848739

2024-11-06 16:11:56,085 - INFO -  [[ build_existing_model.vintage_acs ]] 
2024-11-06 16:11:56,091 - INFO - 
                                   matched     truth   pct_diff
build_existing_model.vintage_acs                               
1940-59                           0.144883  0.084746  70.961413
1960-79                           0.230469  0.262712 -12.273128
1980-99                           0.251536  0.254237  -1.062525
2000-09                           0.142763  0.135593   5.288005
2010s                             0.058462  0.067797 -13.768977
<1940                             0.171887  0.194915 -11.814247

2024-11-06 16:11:56,097 - INFO -  [[ build_existing_model.geometry_floor_area_bin ]] 
2024-11-06 16:11:56,104 - INFO - 
                                               matched     truth    pct_diff
build_existing_model.geometry_floor_area_bin                                
0-1499                                        0.552700  0.542373    1.904058
1500-2499                                     0.309396  0.355932  -13.074323
2500-3999                                     0.100084  0.084746   18.098954
4000+                                         0.037820  0.016949  123.136157

2024-11-06 16:11:56,111 - INFO -  [[ build_existing_model.hvac_heating_type ]] 
2024-11-06 16:11:56,118 - INFO - 
                                         matched     truth  pct_diff
build_existing_model.hvac_heating_type                              
Ducted Heat Pump                        0.118644  0.118644  0.000000
Ducted Heating                          0.595676  0.601695 -1.000307
Non-Ducted Heat Pump                    0.016949  0.016949  0.000000
Non-Ducted Heating                      0.268731  0.262712  2.291026

2024-11-06 16:11:56,124 - INFO -  [[ build_existing_model.federal_poverty_level ]] 
2024-11-06 16:11:56,130 - INFO - 
                                             matched     truth   pct_diff
build_existing_model.federal_poverty_level                               
0-100%                                      0.231604  0.237288  -2.395640
100-150%                                    0.095801  0.084746  13.044830
150-200%                                    0.066591  0.059322  12.253443
200-300%                                    0.125261  0.135593  -7.619685
300-400%                                    0.098992  0.076271  29.790145
400%+                                       0.246158  0.271186  -9.229401
Not Available                               0.135593  0.135593   0.000000

2024-11-06 16:11:56,136 - INFO -  [[ build_existing_model.vacancy_status ]] 
2024-11-06 16:11:56,142 - INFO - 
                                      matched     truth  pct_diff
build_existing_model.vacancy_status                              
Occupied                             0.864407  0.864407       0.0
Vacant                               0.135593  0.135593       0.0

2024-11-06 16:11:56,159 - INFO - truth vs. matched - per dwelling unit energy:
2024-11-06 16:11:56,169 - INFO - 
                                     matched      truth  pct_diff
energy_use_total_m_btu            101.343030  97.328017  4.125239
fuel_use_electricity_total_m_btu   58.353861  54.804576  6.476257
fuel_use_fuel_oil_total_m_btu       0.000000   0.000000       NaN
fuel_use_natural_gas_total_m_btu   33.184418  31.625093  4.930658
fuel_use_propane_total_m_btu        6.401897   6.946737 -7.843115

2024-11-06 16:11:56,193 - INFO - truth vs. matched - per dwelling unit energy:
2024-11-06 16:11:56,203 - INFO - 
                                                                         matched       truth   pct_diff
build_existing_model.vacancy_status                                                                    
Occupied                            energy_use_total_m_btu            112.922780  108.005598   4.552710
                                    fuel_use_electricity_total_m_btu   64.693476   60.344794   7.206392
                                    fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                    fuel_use_natural_gas_total_m_btu   37.112374   35.434294   4.735751
                                    fuel_use_propane_total_m_btu        7.180294    7.655039  -6.201738
Vacant                              energy_use_total_m_btu             27.522125   29.258437  -5.934400
                                    fuel_use_electricity_total_m_btu   17.938815   19.485688  -7.938504
                                    fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                    fuel_use_natural_gas_total_m_btu    8.143701    7.341437  10.927883
                                    fuel_use_propane_total_m_btu        1.439615    2.431313 -40.788556

2024-11-06 16:11:56,226 - INFO - truth vs. matched - per dwelling unit energy:
2024-11-06 16:11:56,238 - INFO - 
                                                                 matched       truth   pct_diff
build_existing_model.tenure                                                                    
Not Available               energy_use_total_m_btu             27.522125   29.258437  -5.934400
                            fuel_use_electricity_total_m_btu   17.938815   19.485688  -7.938504
                            fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                            fuel_use_natural_gas_total_m_btu    8.143701    7.341437  10.927883
                            fuel_use_propane_total_m_btu        1.439615    2.431313 -40.788556
Owner                       energy_use_total_m_btu            133.145499  125.454726   6.130318
                            fuel_use_electricity_total_m_btu   77.926266   72.410242   7.617741
                            fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                            fuel_use_natural_gas_total_m_btu   42.848740   39.300597   9.028217
                            fuel_use_propane_total_m_btu       10.246024   10.575032  -3.111184
Renter                      energy_use_total_m_btu             81.577565   80.959450   0.763487
                            fuel_use_electricity_total_m_btu   44.182652   41.643350   6.097737
                            fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                            fuel_use_natural_gas_total_m_btu   28.221006   29.441525  -4.145568
                            fuel_use_propane_total_m_btu        2.428413    3.129050 -22.391381

2024-11-06 16:11:56,269 - INFO - truth vs. matched - per dwelling unit energy:
2024-11-06 16:11:56,280 - INFO - 
                                                                                matched       truth   pct_diff
build_existing_model.federal_poverty_level                                                                    
0-100%                                     energy_use_total_m_btu             93.818712   82.439286  13.803403
                                           fuel_use_electricity_total_m_btu   49.334863   45.466679   8.507736
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu   44.483886   36.972607  20.315795
                                           fuel_use_propane_total_m_btu        0.000000    0.000000        NaN
100-150%                                   energy_use_total_m_btu             90.761623   92.015000  -1.362145
                                           fuel_use_electricity_total_m_btu   72.070603   70.343600   2.455097
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu   13.154986    9.154900  43.693391
                                           fuel_use_propane_total_m_btu        5.535945   12.516200 -55.769760
150-200%                                   energy_use_total_m_btu            124.768989  117.172714   6.482972
                                           fuel_use_electricity_total_m_btu   78.097547   67.705000  15.349748
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu   18.296030   22.690429 -19.366748
                                           fuel_use_propane_total_m_btu        4.521014    0.000000        inf
200-300%                                   energy_use_total_m_btu            128.018141  131.523625  -2.665289
                                           fuel_use_electricity_total_m_btu   69.258318   60.664938  14.165317
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu   43.555276   45.503312  -4.281087
                                           fuel_use_propane_total_m_btu       15.204599   25.355375 -40.034020
300-400%                                   energy_use_total_m_btu            112.238627   91.715000  22.377612
                                           fuel_use_electricity_total_m_btu   61.627777   61.868222  -0.388640
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu   33.608599   18.665778  80.054639
                                           fuel_use_propane_total_m_btu       17.002278   11.181111  52.062510
400%+                                      energy_use_total_m_btu            128.911047  126.190594   2.155829
                                           fuel_use_electricity_total_m_btu   71.556834   68.039938   5.168870
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu   42.721244   44.769937  -4.576046
                                           fuel_use_propane_total_m_btu        7.262180    4.666750  55.615356
Not Available                              energy_use_total_m_btu             27.522125   29.258437  -5.934400
                                           fuel_use_electricity_total_m_btu   17.938815   19.485688  -7.938504
                                           fuel_use_fuel_oil_total_m_btu       0.000000    0.000000        NaN
                                           fuel_use_natural_gas_total_m_btu    8.143701    7.341437  10.927883
                                           fuel_use_propane_total_m_btu        1.439615    2.431313 -40.788556

2024-11-06 16:11:56,287 - INFO - >> Database down-selected to 1016 buildings, based on input data of 118 buildings, result outputs to: 
C:\Users\ylou2\Desktop\resstock\euss_cleap\data_\downsampled_buildings_id\results_up00__downsampled_method1__jackson_county.csv

